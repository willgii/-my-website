<!DOCTYPE html>
<html lang="zh-CN">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no">
    <title>投篮比赛</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <link href="https://cdn.jsdelivr.net/npm/font-awesome@4.7.0/css/font-awesome.min.css" rel="stylesheet">
    <script>
        tailwind.config = {
            theme: {
                extend: {
                    colors: {
                        primary: '#3B82F6',
                        secondary: '#10B981',
                        accent: '#F59E0B',
                        dark: '#1F2937',
                        light: '#F9FAFB'
                    },
                    fontFamily: {
                        sans: ['Inter', 'system-ui', 'sans-serif'],
                    },
                }
            }
        }
    </script>
    <style type="text/tailwindcss">
        @layer utilities {
            .content-auto {
                content-visibility: auto;
            }
            .backdrop-blur-xs {
                backdrop-filter: blur(2px);
            }
            .text-shadow {
                text-shadow: 0 2px 4px rgba(0,0,0,0.1);
            }
            .animate-bounce-custom {
                animation: bounce-custom 2s infinite;
            }
            @keyframes bounce-custom {
                0%, 100% {
                    transform: translateY(0);
                }
                50% {
                    transform: translateY(-10px);
                }
            }
            .animate-fade-in {
                animation: fade-in 0.5s ease-in-out;
            }
            @keyframes fade-in {
                from { opacity: 0; }
                to { opacity: 1; }
            }
            .animate-scale {
                animation: scale 0.3s ease-in-out;
            }
            @keyframes scale {
                0% { transform: scale(1); }
                50% { transform: scale(1.1); }
                100% { transform: scale(1); }
            }
        }
    </style>
</head>
<body class="bg-gradient-to-b from-blue-50 to-blue-100 min-h-screen font-sans text-dark overflow-hidden">
    <!-- 游戏容器 -->
    <div id="game-container" class="relative w-full h-screen overflow-hidden">
        <!-- 天空背景 -->
        <div class="absolute inset-0 bg-gradient-to-b from-blue-400 to-blue-200"></div>
        
        <!-- 云朵装饰 -->
        <div class="absolute top-10 left-[10%] w-24 h-8 bg-white rounded-full opacity-70 shadow-lg"></div>
        <div class="absolute top-20 right-[15%] w-32 h-10 bg-white rounded-full opacity-80 shadow-lg"></div>
        <div class="absolute top-40 left-[25%] w-28 h-9 bg-white rounded-full opacity-75 shadow-lg"></div>
        
        <!-- 地面 -->
        <div class="absolute bottom-0 left-0 right-0 h-1/4 bg-green-500">
            <div class="absolute bottom-0 left-0 right-0 h-12 bg-gradient-to-t from-green-700 to-green-500"></div>
        </div>
        
        <!-- 游戏界面 -->
        <div id="game-screen" class="absolute inset-0 flex flex-col items-center justify-between p-4">
            <!-- 计分板 -->
            <div class="w-full flex justify-between items-center z-10 bg-white/80 backdrop-blur-xs rounded-xl p-3 shadow-lg">
                <div class="flex items-center space-x-2">
                    <i class="fa fa-clock-o text-primary text-xl"></i>
                    <span id="timer" class="text-xl font-bold">30</span>
                </div>
                <div class="flex items-center space-x-2">
                    <i class="fa fa-basketball-ball text-accent text-xl"></i>
                    <span id="score" class="text-xl font-bold">0</span>
                </div>
            </div>
            
            <!-- 篮球架 -->
            <div id="basketball-hoop" class="absolute top-1/4 left-1/2 transform -translate-x-1/2 z-10">
                <!-- 篮板 -->
                <div class="w-32 h-28 bg-white rounded-md shadow-lg border-4 border-gray-700 flex justify-center items-center">
                    <div class="w-20 h-20 rounded-full border-4 border-red-600"></div>
                </div>
                <!-- 篮筐 -->
                <div class="w-24 h-2 bg-red-600 rounded-full shadow-lg transform -translate-y-1"></div>
                <!-- 篮网 -->
                <div class="w-24 h-16 overflow-hidden">
                    <svg viewBox="0 0 100 100" class="w-full h-full">
                        <path d="M0,0 L100,0 L100,100 L0,100 Z" fill="none" stroke="rgba(255,255,255,0.7)" stroke-width="1" stroke-dasharray="2,2" />
                        <path d="M25,0 L25,100" fill="none" stroke="rgba(255,255,255,0.7)" stroke-width="1" stroke-dasharray="2,2" />
                        <path d="M50,0 L50,100" fill="none" stroke="rgba(255,255,255,0.7)" stroke-width="1" stroke-dasharray="2,2" />
                        <path d="M75,0 L75,100" fill="none" stroke="rgba(255,255,255,0.7)" stroke-width="1" stroke-dasharray="2,2" />
                        <path d="M0,25 L100,25" fill="none" stroke="rgba(255,255,255,0.7)" stroke-width="1" stroke-dasharray="2,2" />
                        <path d="M0,50 L100,50" fill="none" stroke="rgba(255,255,255,0.7)" stroke-width="1" stroke-dasharray="2,2" />
                        <path d="M0,75 L100,75" fill="none" stroke="rgba(255,255,255,0.7)" stroke-width="1" stroke-dasharray="2,2" />
                    </svg>
                </div>
                <!-- 支柱 -->
                <div class="w-6 h-40 bg-gray-700 mx-auto transform translate-y-2"></div>
            </div>
            
            <!-- 篮球 -->
            <div id="basketball" class="absolute bottom-24 left-1/2 transform -translate-x-1/2 w-16 h-16 bg-orange-500 rounded-full shadow-lg cursor-pointer z-20 animate-bounce-custom">
                <div class="absolute inset-0 rounded-full border-2 border-orange-700"></div>
                <div class="absolute w-full h-0.5 bg-orange-700 top-1/2 transform -translate-y-1/2"></div>
                <div class="absolute h-full w-0.5 bg-orange-700 left-1/2 transform -translate-x-1/2"></div>
            </div>
            
            <!-- 游戏控制区 -->
            <div class="w-full flex justify-center items-center space-x-6 mb-8 z-10">
                <button id="start-btn" class="px-6 py-3 bg-primary text-white rounded-full shadow-lg hover:bg-primary/90 active:scale-95 transition-all duration-300 text-lg font-bold flex items-center">
                    <i class="fa fa-play mr-2"></i> 开始游戏
                </button>
                <button id="restart-btn" class="px-6 py-3 bg-secondary text-white rounded-full shadow-lg hover:bg-secondary/90 active:scale-95 transition-all duration-300 text-lg font-bold flex items-center hidden">
                    <i class="fa fa-refresh mr-2"></i> 重新开始
                </button>
            </div>
        </div>
        
        <!-- 游戏结果弹窗 -->
        <div id="result-modal" class="absolute inset-0 flex items-center justify-center bg-dark/50 backdrop-blur-xs z-50 hidden">
            <div class="bg-white rounded-2xl p-8 shadow-2xl max-w-md w-full mx-4 animate-fade-in">
                <div class="text-center">
                    <div class="text-4xl font-bold text-primary mb-2">游戏结束!</div>
                    <div class="text-xl mb-6">你的得分是: <span id="final-score" class="font-bold text-accent">0</span></div>
                    <button id="play-again-btn" class="px-8 py-4 bg-primary text-white rounded-full shadow-lg hover:bg-primary/90 active:scale-95 transition-all duration-300 text-lg font-bold">
                        再玩一次
                    </button>
                </div>
            </div>
        </div>
    </div>

    <script>
        // 获取DOM元素
        const basketball = document.getElementById('basketball');
        const basketballHoop = document.getElementById('basketball-hoop');
        const startBtn = document.getElementById('start-btn');
        const restartBtn = document.getElementById('restart-btn');
        const resultModal = document.getElementById('result-modal');
        const finalScore = document.getElementById('final-score');
        const playAgainBtn = document.getElementById('play-again-btn');
        const scoreDisplay = document.getElementById('score');
        const timerDisplay = document.getElementById('timer');
        
        // 游戏状态
        let isPlaying = false;
        let score = 0;
        let timeLeft = 30;
        let timer;
        let isAnimating = false;
        
        // 游戏配置
        const config = {
            gravity: 0.5,
            throwForce: 15,
            basketPosition: { x: 0, y: 0 },
            ballPosition: { x: 0, y: 0 }
        };
        
        // 更新篮筐和篮球的位置
        function updatePositions() {
            const hoopRect = basketballHoop.getBoundingClientRect();
            const ballRect = basketball.getBoundingClientRect();
            
            config.basketPosition.x = hoopRect.left + hoopRect.width / 2;
            config.basketPosition.y = hoopRect.top + hoopRect.height;
            config.ballPosition.x = ballRect.left + ballRect.width / 2;
            config.ballPosition.y = ballRect.top + ballRect.height / 2;
        }
        
        // 投掷篮球
        function throwBall() {
            if (isAnimating || !isPlaying) return;
            
            isAnimating = true;
            basketball.classList.remove('animate-bounce-custom');
            
            // 获取初始位置
            const startX = config.ballPosition.x;
            const startY = config.ballPosition.y;
            
            // 计算到篮筐的距离和角度
            const dx = config.basketPosition.x - startX;
            const dy = config.basketPosition.y - startY;
            const distance = Math.sqrt(dx * dx + dy * dy);
            
            // 应用一些随机性，使游戏更具挑战性
            const randomX = (Math.random() - 0.5) * distance * 0.3;
            const randomY = (Math.random() - 0.5) * distance * 0.2;
            
            // 设置动画
            let t = 0;
            const duration = 60; // 动画帧数
            const animation = () => {
                t++;
                
                // 抛物线运动
                const progress = t / duration;
                const easeProgress = progress * (2 - progress); // 缓动函数
                
                // 计算新位置
                const newX = startX + dx * easeProgress + randomX * (1 - easeProgress);
                const newY = startY + dy * easeProgress + randomY * (1 - easeProgress) + config.gravity * t * t;
                
                // 应用位置
                basketball.style.transform = `translate(${newX - window.innerWidth / 2}px, ${newY - window.innerHeight + 100}px)`;
                
                // 检查是否进球
                if (t > duration * 0.6) {
                    checkScore(newX, newY);
                }
                
                // 动画结束
                if (t < duration) {
                    requestAnimationFrame(animation);
                } else {
                    resetBall();
                }
            };
            
            requestAnimationFrame(animation);
        }
        
        // 检查是否进球
        function checkScore(ballX, ballY) {
            const hoopRect = basketballHoop.getBoundingClientRect();
            const basketX = hoopRect.left + hoopRect.width / 2;
            const basketY = hoopRect.top + hoopRect.height * 0.8; // 篮筐位置
            
            // 计算篮球和篮筐之间的距离
            const dx = ballX - basketX;
            const dy = ballY - basketY;
            const distance = Math.sqrt(dx * dx + dy * dy);
            
            // 如果篮球在篮筐附近，判定为进球
            if (distance < 30) {
                score++;
                scoreDisplay.textContent = score;
                
                // 显示得分动画
                showScoreAnimation(ballX, ballY);
                
                // 篮筐晃动效果
                basketballHoop.classList.add('animate-scale');
                setTimeout(() => {
                    basketballHoop.classList.remove('animate-scale');
                }, 300);
            }
        }
        
        // 显示得分动画
        function showScoreAnimation(x, y) {
            const scorePopup = document.createElement('div');
            scorePopup.className = 'absolute text-2xl font-bold text-green-500 animate-fade-in';
            scorePopup.style.left = `${x}px`;
            scorePopup.style.top = `${y}px`;
            scorePopup.style.transform = 'translate(-50%, -50%)';
            scorePopup.style.zIndex = '100';
            scorePopup.textContent = '+1';
            
            document.body.appendChild(scorePopup);
            
            // 动画效果
            setTimeout(() => {
                scorePopup.style.opacity = '0';
                scorePopup.style.transform = 'translate(-50%, -150%)';
                scorePopup.style.transition = 'opacity 0.5s, transform 0.5s';
                
                setTimeout(() => {
                    document.body.removeChild(scorePopup);
                }, 500);
            }, 10);
        }
        
        // 重置篮球位置
        function resetBall() {
            isAnimating = false;
            basketball.style.transform = 'translate(-50%, 0)';
            basketball.classList.add('animate-bounce-custom');
            
            // 随机改变篮筐位置，增加游戏难度
            if (isPlaying) {
                const randomX = (Math.random() - 0.5) * window.innerWidth * 0.3;
                basketballHoop.style.transform = `translate(calc(-50% + ${randomX}px), -25%)`;
                
                // 更新位置
                updatePositions();
            }
        }
        
        // 开始游戏
        function startGame() {
            isPlaying = true;
            score = 0;
            timeLeft = 30;
            scoreDisplay.textContent = score;
            timerDisplay.textContent = timeLeft;
            
            startBtn.classList.add('hidden');
            restartBtn.classList.remove('hidden');
            resultModal.classList.add('hidden');
            
            // 更新位置
            updatePositions();
            
            // 启动计时器
            timer = setInterval(() => {
                timeLeft--;
                timerDisplay.textContent = timeLeft;
                
                if (timeLeft <= 0) {
                    endGame();
                }
            }, 1000);
        }
        
        // 结束游戏
        function endGame() {
            isPlaying = false;
            clearInterval(timer);
            finalScore.textContent = score;
            resultModal.classList.remove('hidden');
        }
        
        // 事件监听
        startBtn.addEventListener('click', startGame);
        restartBtn.addEventListener('click', startGame);
        playAgainBtn.addEventListener('click', startGame);
        
        basketball.addEventListener('click', () => {
            if (isPlaying) {
                throwBall();
            }
        });
        
        // 窗口大小改变时更新位置
        window.addEventListener('resize', updatePositions);
        
        // 初始化位置
        updatePositions();
    </script>
</body>
</html>
    